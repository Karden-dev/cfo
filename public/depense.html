<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WINK CFO - Nouvelle Dépense</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="d-flex" id="wrapper">
        
        <div id="sidebar-container"></div>

        <div id="page-content-wrapper">
            
            <div id="topbar-container"></div>

            <div class="container-fluid px-4 py-4">
                
                <div class="d-flex align-items-center mb-4">
                    <a href="/dashboard.html" class="btn btn-outline-secondary me-3 rounded-circle">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <div>
                        <h3 class="fw-bold m-0 text-danger">Nouvelle Dépense</h3>
                        <div class="text-muted small">Sortir de l'argent de la caisse WINK</div>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        
                        <div class="card shadow-sm border-0 border-top border-4 border-danger">
                            <div class="card-body p-4">
                                
                                <form id="form-depense">
                                    
                                    <div class="mb-4">
                                        <label class="form-label fw-bold text-uppercase small text-muted">Nature de la dépense</label>
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <input type="radio" class="btn-check" name="famille" id="fam-ops" value="CHARGES_OPS" checked onchange="updateFormDisplay()">
                                                <label class="btn btn-outline-danger w-100 p-3 h-100 d-flex flex-column align-items-center justify-content-center gap-2" for="fam-ops">
                                                    <i class="fas fa-tools fs-3"></i>
                                                    <span>Exploitation</span>
                                                    <small class="text-muted" style="font-size:0.7em">Essence, Pannes...</small>
                                                </label>
                                            </div>
                                            <div class="col-md-4">
                                                <input type="radio" class="btn-check" name="famille" id="fam-fixe" value="CHARGES_FIXES" onchange="updateFormDisplay()">
                                                <label class="btn btn-outline-secondary w-100 p-3 h-100 d-flex flex-column align-items-center justify-content-center gap-2" for="fam-fixe">
                                                    <i class="fas fa-building fs-3"></i>
                                                    <span>Charges Fixes</span>
                                                    <small class="text-muted" style="font-size:0.7em">Loyer, Internet...</small>
                                                </label>
                                            </div>
                                            <div class="col-md-4">
                                                <input type="radio" class="btn-check" name="famille" id="fam-dette" value="REMBOURSEMENT" onchange="updateFormDisplay()">
                                                <label class="btn btn-outline-primary w-100 p-3 h-100 d-flex flex-column align-items-center justify-content-center gap-2" for="fam-dette">
                                                    <i class="fas fa-handshake fs-3"></i>
                                                    <span>Remboursement</span>
                                                    <small class="text-muted" style="font-size:0.7em">Banque, Tontine...</small>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="text-muted my-4">

                                    <div class="mb-3 p-3 bg-light rounded border" id="block-moto">
                                        <label class="form-label fw-bold text-dark"><i class="fas fa-motorcycle me-2"></i>Moto Concernée</label>
                                        <select class="form-select" id="moto_id">
                                            <option value="">-- Sélectionner une moto (Optionnel) --</option>
                                            <option value="1">Moto #01 (CE-123-AB)</option>
                                            <option value="2">Moto #02 (CE-456-XY)</option>
                                            </select>
                                    </div>

                                    <div class="mb-3 p-3 bg-light rounded border border-primary d-none" id="block-dette">
                                        <label class="form-label fw-bold text-primary"><i class="fas fa-file-invoice-dollar me-2"></i>Dette à Rembourser</label>
                                        <select class="form-select border-primary" id="dette_id">
                                            <option value="">-- Choisir la dette --</option>
                                            </select>
                                        <div class="form-text text-primary">Le montant payé sera déduit du "Reste à payer" de cette dette.</div>
                                    </div>

                                    <div class="row g-3">
                                        
                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Montant (FCFA) <span class="text-danger">*</span></label>
                                            <div class="input-group input-group-lg">
                                                <input type="number" class="form-control fw-bold text-danger" id="montant" placeholder="0" required min="100">
                                                <span class="input-group-text bg-light">FCFA</span>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label fw-bold">Date de sortie</label>
                                            <input type="date" class="form-control form-control-lg" id="date_transaction" required>
                                        </div>

                                        <div class="col-md-12">
                                            <label class="form-label fw-bold">Catégorie</label>
                                            <input type="text" class="form-control" list="categories-list" id="categorie" placeholder="Ex: Carburant" required>
                                            <datalist id="categories-list">
                                                <option value="Carburant">
                                                <option value="Vidange">
                                                <option value="Panne mécanique">
                                                <option value="Pièce de rechange">
                                                <option value="Frais de Police/Control">
                                                <option value="Salaire">
                                                <option value="Loyer">
                                                <option value="Internet/Crédit">
                                                <option value="Electricité">
                                            </datalist>
                                        </div>

                                        <div class="col-md-12">
                                            <label class="form-label fw-bold">Description Détailée</label>
                                            <input type="text" class="form-control" id="description" placeholder="Ex: Vidange complète + Patins de frein">
                                        </div>

                                    </div>

                                    <div class="d-grid mt-5">
                                        <button type="submit" class="btn btn-danger btn-lg shadow-sm" id="btn-save">
                                            <i class="fas fa-paper-plane me-2"></i> Valider la Dépense
                                        </button>
                                    </div>

                                </form>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script src="js/core/ui.js"></script>
    <script src="js/pages/depense.js"></script>

</body>
</html>